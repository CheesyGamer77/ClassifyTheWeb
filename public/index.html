<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta content="EMU COSC472 W23" property="og:site_name"/>
    <meta content="Classify The Web" property="og:title"/>
    <meta content="https://472.cheesygamer77.pw" property="og:url"/>
    <meta content="A website classifcation database using Redis and TypeScript" property="og:description"/>
    <meta content="#11806A" data-react-helmet="true" name="theme-color"/>
    <link rel="stylesheet" href="./styles/index.css">
    <script>
        function addLog(message) {
            const p = document.createElement("p");
            p.innerHTML = `[${new Date().toLocaleTimeString()}]: ${message}`;

            const log = document.getElementById("queryLog");
            log.removeAttribute("hidden");
            log.appendChild(p);
        }

        async function checkApi() {
            let fail = false;

            try {
                const response = await fetch("https://472.cheesygamer77.pw/api/check");

                if (!response.ok) {
                    fail = true;
                }
            }
            catch (ignored) {
                fail = true
            }

            let color = "green";
            let message = "API health is ok";
            if (fail) {
                color = "red";
                message = "API failed health check";
            }

            document.getElementById("checkApiButton").style.backgroundColor = color;
            addLog(message)
        }
    </script>

    <title>Classify The Web</title>
</head>
<body>
    <h1>Welcome to Classify The Web</h1>
    <p>A website classification database using Redis and TypeScript</p>
    <br>
    <p>NOTE: This site is (very much) under construction. Mind the bugs and the goofy HTML :D</p>

    <div id="queryLog" hidden="true" style="border-style:solid"></div>
    <br>

    <button id="checkApiButton" onclick="checkApi()">Check API Health</button>
</body>
</html>
